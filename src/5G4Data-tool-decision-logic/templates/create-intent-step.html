<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create TM Forum formatted Intent</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <!-- Include Showdown.js (Markdown to HTML Converter) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/2.0.3/showdown.min.js"></script>
</head>
<body>

    <!-- Header Container -->
    <div class="header-container">
        <span>INTEND 5G4DATA MVS</span>
        <div class="logos">
            <img src="{{ url_for('static', filename='telenor_logo.png') }}" alt="Telenor Logo">
            <div class="logo-black-bg">
                <img src="{{ url_for('static', filename='intend_logo.gif') }}" alt="INTEND Project Logo">
            </div>
        </div>
    </div>

    <div class="container">
        <div class="info-container" style="max-width: 770px;">
            <h1>Next Step: Intent Creation</h1>
            
            <p><strong>To accurately define <i>Network QoS Expectations</i> in the Intent template, the following parameters must be determined:</strong></p>
            <ol>
                <li>The expected end-to-end latency (in milliseconds) for the workload</li>
                <li>The required bandwidth (in Mbps) for the workload</li>
                <li>The geographical area where the network slice should be valid (geo polygon)</li>
                <li>Additional considerations (e.g., sustainability goals, cost constraints, or other future requirements)</li>
            </ol>
    
            <p><strong>To properly specify <i>Deployment Expectations</i> in the Intent template, the following details must be established:</strong></p>
            <ol>
                <li>The Edge data center where the workload will be deployed</li>
                <li>The required compute latency for the workload</li>
                <li>The workload to be deployed (unique ID from the catalog)</li>
                <li>The workload deployment descriptor URL (also available in the catalog)</li>
            </ol>
            <!-- More Details Button -->
            <button class="more-details-btn" onclick="openModal()">More details</button>
            <div class="button-container">
                <a href="{{ url_for('index') }}" class="home-button">Back to Home</a>
            </div>

            <p>
                When a business level Intent with the needed Expectation(s) have been created, it is time for inChat to send it to inSwitch, and when inSwitch has created the needed resource level Intent(s) it is time to send them to inNet and inOrch. TM Forum has designed a Intent management API that can be used. Click the next button to get to know more about that (and yes, we have created a reference implementation)
            </p>
            <div class="next-step-container">
                <a href="{{ url_for('send_intent_step') }}" class="next-step-button">Next Step</a>
            </div>            
        </div>
    </div>

       
    <!-- Modal for displaying markdown -->
    <div id="markdownModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal()">âœ–</button>
            <h3>More Details</h3>
            <div id="markdown-content">Loading documentation...</div>
        </div>
    </div>

    <script>
        function openModal() {
            document.getElementById("markdownModal").style.display = "flex";

            // Fetch and convert Markdown content
            fetch("{{ url_for('static', filename='create_intent.md') }}")
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`HTTP error! Status: ${response.status}`);
                    }
                    return response.text();
                })
                .then(markdown => {
                    var converter = new showdown.Converter();
                    document.getElementById("markdown-content").innerHTML = converter.makeHtml(markdown);
                })
                .catch(error => {
                    console.error("Error loading markdown:", error);
                    document.getElementById("markdown-content").innerHTML = "Error loading details. Check console for more information.";
                });
        }

        function closeModal() {
            document.getElementById("markdownModal").style.display = "none";
        }

        // Close the modal when clicking outside of it
        window.onclick = function(event) {
            let modal = document.getElementById("markdownModal");
            if (event.target === modal) {
                modal.style.display = "none";
            }
        }
    </script>
</body>
</html>
